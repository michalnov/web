<!DOCTYPE html>
<html>

<head>
	<title>Stranka</title>
	<meta charset="utf-8">

	<link rel="stylesheet" type="text/css" href="source/style.css">

	<script type="text/javascript" src="source/myscript.js"></script>
  <script type="text/javascript" src="source/jquery-3.2.1.js"></script>
  <script type="text/javascript">
    var tableContent;

    function createAlert(where) {
      var img = document.createElement('img');
      document.getElementById(where).innerHTML = "Invalid value";
      $('#'+where).css('color', 'red');
      img.setAttribute("src","source/alert.png");
      img.style.width = "25px";
      document.getElementById(where).appendChild(img);
    }

    function clearAlert(where) {
      document.getElementById(where).innerHTML = "";
    }

    function getDocumentDate() {
      var date = document.getElementById('uage').value;
      var parsedDate = date.split("-");
      return parsedDate;
    }

    function inputControl() {
      var name = $('#uname').val();
      var surname = $('#usurname').val();
      var parsedDate = getDocumentDate();
      var actual = new Date();
      var currentDay = actual.getDate();
      var currentMonth = actual.getMonth();
      var currentYear = actual.getFullYear();
      var error1 = false;
      console.log(name);
      console.log(surname);
      console.log(parsedDate);
      if (name == "" || name.length < 2) {
        clearAlert("alertName");
        createAlert("alertName");
        error1 = true;
      }
      else {
        clearAlert("alertName");
        error1 = false;
      }
      if (surname == "" || surname.length < 2) {
        clearAlert("alertSurname");
        createAlert("alertSurname");
        error1 = true;
      }
      else {
        clearAlert("alertSurname");
        error1 = false;
      }

      if (parsedDate == "" || parsedDate.length < 2 || currentYear < parsedDate[0]) {
        console.log("aa");
        clearAlert("alertDate");
        createAlert("alertDate");
        error1 = true;
      }
      else {
        if (currentYear > parsedDate[0]) {
          clearAlert("alertDate");
          error1 = false;
        }
        else
        {
          if ((parseInt(currentMonth)+1) >= parsedDate[1]) {
            if (currentDay >= parsedDate[2]) {
              clearAlert("alertDate");
              error1 = false;
            }
            else {
              clearAlert("alertDate");
              createAlert("alertDate");
              error1 = true;
            }
          }
          else {
            clearAlert("alertDate");
            createAlert("alertDate");
            error1 = true;
          }
        }
      }
      return error1;
    }

  </script>

</head>
<body>
	<form name="myTable">
			<table align="center">
			<tr>
				<td>Name</td>
				<td>
          <input type="text" name="userName" id="uname">
          <div id="alertName"></div>
        </td>
			</tr>
			<tr>
				<td>Surname</td>
				<td>
          <input type="text" name="userSurname" id="usurname">
          <div id="alertSurname"></div>
        </td>
			</tr>
			<tr>
				<td>Age</td>
				<td>
          <input type="date" name="userAge" id="uage">
          <div id="alertDate"></div>
        </td>
			</tr>
			<tr>
				<td>Gender</td>
				<td>
					<input type="radio" name="userGender" id="opt1" value="male">Male<br>
					<input type="radio" name="userGender" id="opt2" value="female">Female<br>
					<input type="radio" name="userGender" id="opt3" value="" checked>preffered not to say<br>
				</td>
			</tr>
			<tr>
				<td>Controls</td>
				<td>
          <input value="Add to table" type="button" style="color: blue"  onclick="inputControl()" >
          <input value="Reset" type="reset" style="color: red"  onclick="deleteOutput()" onclick="generator()" >
        </td>
			</tr>
		</table>
	</form>

	<dir id="someone"></dir>
	<div id="message"></div>
	<div class="tabulka">
		<table id="myTable">

		</table>
	</div>

</body>
</html>
